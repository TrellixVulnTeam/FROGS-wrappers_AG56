<tool id="FROGS_data_manager" name="FROGS Data manager" version="3.2.1" tool_type="manage_data">
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        $__tool_directory__/FROGS_data_manager.py
            --database="frogs_db_data"
            
            --all_dbs="$db_type.db"
            #if $db_type.db=="false"
                --date="$db_type.date"
                --amplicons="$db_type.amplicons"
                --bases="$db_type.bases"
                --filters="$db_type.filters"
            #end if
            --only_last_versions="$only_last_versions"
            
            --tool_data="$__tool_data_path__"
            --output "$output"
    ]]></command>
    <inputs>
        <conditional name="db_type">
            <param name="db" type="boolean" checked="true" truevalue="true" falsevalue="false" label="Download all databases"/>
            <when value="true"/>
            <when value="false">
                <param name="date" value="0" type="text"  label="Only more recent database than this date will be downloaded" help="Please enter a date at the following format: YYYYMMDD, leave 0 for no date">
                    <validator type="regex" message="Please enter a date at the following format: YYYYMMDD, leave 0 for no date">0|[1-2]{1}[0-9]{3}[0-1]{1}[0-9]{1}([0-2]{1}[0-9]{1}|3[0-1]{1})</validator>
                </param>
                <param name="amplicons" type="text" label='Select database to download by amplicons, put an amplicons list separated by "," ' help='example: "COI,ITS,16S" or "23S"'/>
                <param name="bases" type="text" label='Select database to download by base, put a bases list separated by "," ' help='example: "SILVA,PR2,MIDAS" or "BOLD"'/>
                <param name="filters" type="text" label='Select database to download by filters, put a filters list separated by "," ' help='example: "Pintail100,Fungi"'/>
            </when>
        </conditional>
        <param name="only_last_versions" type="boolean" checked="true" label="Download only the last version of each database"/>
    </inputs>
    <outputs>
        <data name="output" format="data_manager_json"/>
    </outputs>
    <help>
        FROGS datamanager allows to download preformated databases for FROGS Affiliation OTU tool.

        All databases are available at http://genoweb.toulouse.inra.fr/frogs_databanks/assignation/.
        
        This tools is based on the `FROGS_databases.tsv.txt &lt;http://genoweb.toulouse.inra.fr/frogs_databanks/assignation/FROGS_databases.tsv.txt&gt;`_, that we update each time a new database is formatted.</help>
</tool>